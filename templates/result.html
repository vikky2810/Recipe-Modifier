<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Recipe Analysis Results - Your personalized healthy recipe is ready.">
    <title>Results - HealthRecipeAI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="results-page">
        <!-- Header -->
        <header class="results-header">
            <div class="container">
                <div class="header-left">
                    <a href="{{ url_for('index') }}" class="back-btn">‚Üê Back</a>
                    <div class="header-title">
                        <h1>üìä Recipe Analysis Results</h1>
                        <p>Your personalized healthy recipe is ready!</p>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                
                <!-- Summary Card -->
                <div class="results-card">
                    <div class="card-header info">
                        <span>üìã</span>
                        <h3>Analysis Summary</h3>
                    </div>
                    <div class="card-body">
                        <div class="summary-grid">
                            <div class="summary-item">
                                <h4>üè• Health Condition</h4>
                                <span class="badge">{{ condition.replace('_', ' ').title() }}</span>
                            </div>
                            <div class="summary-item">
                                <h4>üïê Analysis Date</h4>
                                <span class="value">{{ moment }}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Original Ingredients -->
                <div class="results-card">
                    <div class="card-header secondary">
                        <span>üìù</span>
                        <h3>Original Ingredients</h3>
                    </div>
                    <div class="card-body">
                        <div class="ingredients-grid">
                            {% for ingredient in original_ingredients %}
                                <span class="ingredient-badge secondary">{{ ingredient.strip() }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <!-- Harmful Ingredients -->
                {% if harmful %}
                <div class="results-card">
                    <div class="card-header danger">
                        <span>‚ö†Ô∏è</span>
                        <h3>Harmful Ingredients Detected</h3>
                    </div>
                    <div class="card-body">
                        <div class="alert-box danger">
                            <span>‚ÑπÔ∏è</span>
                            <span>The following ingredients may be harmful for your condition and have been replaced:</span>
                        </div>
                        <div class="ingredients-grid">
                            {% for ingredient in harmful %}
                                <span class="ingredient-badge danger">‚ùå {{ ingredient }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% else %}
                <div class="results-card">
                    <div class="card-header success">
                        <span>üéâ</span>
                        <h3>Great News!</h3>
                    </div>
                    <div class="card-body">
                        <div class="alert-box success">
                            <span>üëç</span>
                            <span>All your ingredients are safe for your condition! No replacements needed.</span>
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Safe Ingredients -->
                <div class="results-card">
                    <div class="card-header success">
                        <span>üõ°Ô∏è</span>
                        <h3>Safe Ingredients for Your Recipe</h3>
                    </div>
                    <div class="card-body">
                        <div class="alert-box success">
                            <span>üíö</span>
                            <span>These ingredients are safe and healthy for your condition:</span>
                        </div>
                        <div class="ingredients-grid">
                            {% for ingredient in safe %}
                                <span class="ingredient-badge success">‚úì {{ ingredient }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <!-- Modified Recipe -->
                <div class="results-card">
                    <div class="card-header primary">
                        <span>üç≥</span>
                        <h3>Your Modified Recipe</h3>
                    </div>
                    <div class="card-body">
                        <div class="alert-box info">
                            <span>üí°</span>
                            <span>Here's your personalized recipe with safe ingredients:</span>
                        </div>
                        <div class="recipe-content">
                            <h5>üìñ Recipe Instructions</h5>
                            {{ recipe | safe }}
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <a href="{{ url_for('index') }}" class="action-btn primary">
                        ‚Üê Check Another Recipe
                    </a>
                    <a href="{{ url_for('view_report', patient_id=current_user.user_id if current_user.is_authenticated else '1') }}" class="action-btn info" target="_blank">
                        üëÅÔ∏è View Health Report
                    </a>
                    <a href="{{ url_for('generate_report', patient_id=current_user.user_id if current_user.is_authenticated else '1') }}" class="action-btn warning">
                        üìÑ Download Report
                    </a>
                </div>

                <!-- Health Tips -->
                <div class="tips-card">
                    <div class="card-header info">
                        <span>üí°</span>
                        <h3>Health Tips</h3>
                    </div>
                    <div class="card-body">
                        <div class="tips-grid">
                            <div class="tips-section">
                                <h5>üçé Nutrition Tips</h5>
                                <ul>
                                    <li><span>‚úì</span> Always read ingredient labels</li>
                                    <li><span>‚úì</span> Choose whole foods when possible</li>
                                    <li><span>‚úì</span> Consult your healthcare provider</li>
                                </ul>
                            </div>
                            <div class="tips-section">
                                <h5>‚ù§Ô∏è Remember</h5>
                                <ul>
                                    <li><span>‚ÑπÔ∏è</span> This tool is for guidance only</li>
                                    <li><span>‚ÑπÔ∏è</span> Individual needs may vary</li>
                                    <li><span>‚ÑπÔ∏è</span> Keep track of your food intake</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>

        <!-- Footer -->
        <footer class="results-footer">
            <p>‚ù§Ô∏è Your health is our priority</p>
            <small>This tool is for educational purposes. Always consult with your healthcare provider.</small>
        </footer>
    </div>

    <script>
        // Animate cards on load
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.results-card, .tips-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.5s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
    </script>
</body>
</html>
